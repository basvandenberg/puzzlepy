#!/usr/bin/env python3

import argparse

from puzzlepy.sudoku import Sudoku, SudokuSolver, SudokuGenerator


def solve(fin):

    sudokus = Sudoku.load_txt(fin)

    for s in sudokus:
        ss = SudokuSolver(s)
        result = ss.solve()

        print(result)


def generate(outfile, level, number, seed):

    sudokus = SudokuGenerator.generate(level, number, seed)

    with open(outfile, 'w') as fout:
        Sudoku.save_json(fout, sudokus, level)


if __name__ == "__main__":

    # Parse arguments.
    parser = argparse.ArgumentParser()

    action = parser.add_mutually_exclusive_group(required=True)
    action.add_argument('--solve', type=argparse.FileType('r'))
    action.add_argument('--generate')

    # Generate options
    parser.add_argument('--level')
    parser.add_argument('--number', type=int)
    parser.add_argument('--seed', type=int)

    args = parser.parse_args()

    if(args.solve):
        solve(args.solve)

    elif(args.generate):
        generate(args.generate, args.level, args.number, args.seed)
